<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Validazione</title>
</head>
<body>

   <!-- Creazione di un form -->
   <!-- action: dirà ad html dove inviare i dati / i frontendendisti non lo usano -->
   <!-- method: ci sono due modalità di invio dei dati GET e POST. 
         GET si utilizza se abbiamo bisogno di leggere i params (devo cercare che ha detto )
         POST fa un invio di dati senza sporcare l'indirizzo
      -->
   <form id="mioForm">

      <div>
            <input type="text" id="nome" class="notEmpty" placeholder="Nome">
            <span class="error"></span>
      </div>
      <div>
            <input type="text" id="cognome" placeholder="Cognome">
            <span class="error"></span>
      </div>
      <div>
            <input type="email" id="email" class="notEmpty" placeholder="Email">
            <span class="error"></span>
      </div>
      <div>
            <input type="password" id="password" class="notEmpty" placeholder="Password">
            <span class="error"></span>
      </div>
      <button type="button" id="show">Mostra/nascondi</button>

      <button id="send">Iscriviti</button>
   </form>


   <script>

      /**
       * Creazione di un form validato da Javascript
       * --------------------------------------------------------------------
       * Javascript blocca l'invio dei dati, li valida JS e li invia lui dopo la validzione
       */

      //  let formBtn = document.getElementById('send');

      //  formBtn.addEventListener('click', function(e){

      //    e.preventDefault(); // blocca i funzionamenti predefiniti del form

      //    console.log(e);
      //    // tramite la proprietà target di e posso vedere in quale elemento si è scatenato l'evento

      //    let nome = document.getElementById('nome');
      //    let cognome = document.getElementById('cognome');
      //    let email = document.getElementById('email');
      //    let password = document.getElementById('password');

      //    let valid = true;

      //    if(!nome.value){
      //       valid = false;
      //    }
      //    if(!cognome.value){
      //       valid = false;
      //    }
      //    if(!email.value){
      //       valid = false;
      //    }
      //    if(!password.value){
      //       valid = false;
      //    }

      //    if(valid){
      //       // invio il form
      //    }

      //  })

       let formBtn = document.getElementById("send");

        formBtn.addEventListener('click', function (e) {
            e.preventDefault();//blocca i funzionamenti predefiniti

            let campi = document.querySelectorAll('#mioForm .notEmpty');
            //let [,,password] = campi;
            let valid = true;
            

            campi.forEach(campo =>{
                if (!campo.value) {
                    campo.nextElementSibling.textContent = 'Devi inseririre ' + campo.placeholder 
                    valid = false;
                }else{
                    campo.nextElementSibling.textContent = ''
                }
            })

            if (valid) {
                //invio il form
            }

        })

        let show = document.getElementById("show");
        show.addEventListener('click', function (e) {
            let password = document.getElementById('password');
            password.type = (password.type == 'password') ? 'text' : 'password';
        })

        /*
        VERSIONE SEMPLICE
        formBtn.addEventListener('click', function (e) {
            e.preventDefault();//blocca i funzionamenti predefiniti
            let nome = document.getElementById('nome');
            let cognome = document.getElementById('cognome');
            let email = document.getElementById('email');
            let password = document.getElementById('password');
            
            let valid = true;
            if (!nome.value) {
                nome.nextElementSibling.textContent = 'Devi inseririre il ' + nome.placeholder 
                valid = false;
            }else{
                nome.nextElementSibling.textContent = ''
            }
            if (!cognome.value) {
                cognome.nextElementSibling.textContent = 'Devi inseririre il ' + cognome.placeholder 
                valid = false;
            }else{
                cognome.nextElementSibling.textContent = ''
            }
            if (!email.value) {
                email.nextElementSibling.textContent = 'Devi inseririre l\' ' + email.placeholder 
                valid = false;
            }else{
                email.nextElementSibling.textContent = ''; 
            }
            if (!password.value) {
                password.nextElementSibling.textContent = 'Devi inseririre la ' + password.placeholder 
                valid = false;
            }else{
                password.nextElementSibling.textContent = '';
            }
            if (valid) {
                //invio il form
            }
        })*/
   </script>
   
</body>
</html>