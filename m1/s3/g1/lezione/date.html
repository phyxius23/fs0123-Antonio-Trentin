<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Oggetto Date</title>
</head>
<body>

   <div id="ora"></div>

   <script>

      /**
       * JS gestisce le date attraverso l'oggetto Date, di default ritorna la data attuale del browser
      */
      var now = new Date(); // scrivo nella variabile un oggetto date, contenente le info relative a data ed ora attuali
      console.log(now);
      
      // metodi per la lettura
      let year = now.getFullYear(); //=> 2023
      let month = now.getMonth();   //=> da zero a 11
      let weekDay = now.getDay();   //=> il numero del giorno della settimana, numeri da 0 a 6 e ricorda che inizia a contare con la domenica
      let day = now.getDate();      //=> il giorno del mese
      
      console.log(new Date().getTime()); //=> mi restituisce i millisecondi trascorsi dal 01/01/1970
      
      console.log(year, month, day, weekDay);

      now.setDate(23); //=> imposto un giorno del mese a mio piacere
      now.setMonth(-1); 
      //=> se lo imposto a 11 mi restituisce dicembre 2023
      //=> se però scrivo 12 passa a gennaio 2024
      //=> se scrivessi 0 punterei gennaio 2023
      //=> mentre se scrivessi -1 dicembre 2022

      console.log(now);

      console.log(now.toLocaleDateString()); //=> restituisce la data nel formato del paese in cui è settato il browser, se ho il browser con impostazioni americane allora restituisce la formattazione USA

      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      console.log(now.toLocaleDateString('it-IT', options)); //=> venerdì 23 dicembre 2022

      /**
       * ------------------------------------------------------------------------------------------------- *
       * Per app che fanno ampio utilizzo di date e orari si consiglia l'utilizzo della libreria moment.js *
       * ------------------------------------------------------------------------------------------------- *
      */

      /**
       * setTimeout e setInterval
       * -------------------------------------------------------------------------------------------------
       * sono delle funzioni di javascript che ritardano l'esecuzione di una funzione oppure la ripetono ogni TOT millesecondi
       */

      // eseguo la funzione 1 volta dopo 3 secondi (3000(ms))
      setTimeout(function(){
         console.log(new Date());
      }, 3000); //una funzione passata come argomento di un'altra funzione si chiama callback

      // eseguo una funzione all'infinito ogni secondo
      // setInterval(function(){
      //    console.log(new Date());
      // }, 1000);

      setInterval(function(){
         
         let tag = document.querySelector('#ora');
         let orario = new Date().toLocaleTimeString();

         tag.textContent = orario;

      }, 1000);

      // una particolarità di setInterval() è la possibilità di stoppare l'esecuzione della funzione stessa grazie all'utilizzo della funzione clearInterval()
      let count = 10;
      let timer = setInterval(function(){

         console.log(count);                 // mostro il valore di count
         if(count == 0){
            clearInterval(timer)             // fermo il timer
         }
         count--;                            // riduco count di 1
      }, 1000);

      // creare date future
      let dateNow = new Date();

      dateNow.setMonth(dateNow.getMonth() + 1);      // ad un mese da oggi

      console.log(dateNow);



      // Una classe è una struttura che ci permette di generare un'istanza di un oggetto, per convenzione sia le classi che i costruttori andremo sempre a nominarli con la prima lettera maiuscola. Questo ci permette di capire quando una funzione è una classe che ci permetterà di istanziare degli oggetti
   </script>
   
</body>
</html>